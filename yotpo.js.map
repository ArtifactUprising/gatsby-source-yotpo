{"version":3,"file":"yotpo.js","names":["getAccessToken","appKey","appSecret","page","pageSize","options","method","url","json","client_id","client_secret","grant_type","Promise","resolve","reject","request","error","response","body","access_token","allReviews","accessToken","qs","utoken","count","reviews","allProductBottomlines","bottomlines","allSiteBottomlines","bottomline"],"sources":["src/yotpo.js"],"sourcesContent":["import request from \"request\";\n\nexport const getAccessToken = ({ appKey, appSecret, page, pageSize }) => {\n  const options = {\n    method: \"POST\",\n    url: `https://api.yotpo.com/oauth/token`,\n    json: {\n      client_id: appKey,\n      client_secret: appSecret,\n      grant_type: \"client_credentials\",\n    },\n  };\n\n  return new Promise((resolve, reject) => {\n    request(options, function (error, response, body) {\n      if (error) reject(error);\n\n      resolve(body.access_token);\n    });\n  });\n};\n\nexport const allReviews = ({ appKey, accessToken, page, pageSize }) => {\n  const options = {\n    method: \"GET\",\n    url: `https://api.yotpo.com/v1/apps/${appKey}/reviews`,\n    qs: {\n      utoken: accessToken,\n      page: page,\n      count: pageSize,\n    },\n    json: true,\n  };\n\n  return new Promise((resolve, reject) => {\n    request(options, function (error, response, body) {\n      if (error) reject(error);\n\n      resolve(body.reviews);\n    });\n  });\n};\n\nexport const allProductBottomlines = ({ appKey, page, pageSize }) => {\n  const options = {\n    method: \"GET\",\n    url: `https://api.yotpo.com/v1/apps/${appKey}/bottom_lines`,\n    qs: {\n      page: page,\n      count: pageSize,\n    },\n    json: true,\n  };\n\n  return new Promise((resolve, reject) => {\n    request(options, function (error, response, body) {\n      if (error) reject(error);\n\n      resolve(body.response.bottomlines);\n    });\n  });\n};\n\nexport const allSiteBottomlines = ({ appKey, page, pageSize }) => {\n  const options = {\n    method: \"GET\",\n    url: `https://api.yotpo.com/products/${appKey}/yotpo_site_reviews/bottomline`,\n    qs: {\n      page: page,\n      count: pageSize,\n    },\n    json: true,\n  };\n\n  return new Promise((resolve, reject) => {\n    request(options, function (error, response, body) {\n      if (error) reject(error);\n\n      resolve([body.response.bottomline]);\n    });\n  });\n};\n"],"mappings":"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"}